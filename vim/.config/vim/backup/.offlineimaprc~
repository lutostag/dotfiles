[general]
# List of accounts to be synced, separated by a comma.
accounts = canonical
# This will suppress anything but errors
# ui = quiet

[Account canonical]
# Identifier for the local repository; e.g. the maildir to be synced via IMAP.
localrepository = canonical-local
# Identifier for the remote repository; i.e. the actual IMAP, usually non-local.
remoterepository = canonical-remote
# Status cache. Default is plain, which eventually becomes huge and slow.
status_backend = sqlite
postsynchook = notmuch new

[Repository canonical-local]
# Currently, offlineimap only supports maildir and IMAP for local repositories.
type = Maildir
# Where should the mail be placed?
localfolders = ~/.mail/canonical
nametrans = lambda folder: re.sub('spam', '[Gmail].Spam',
                           re.sub('drafts', '[Gmail].Drafts',
                           re.sub('sent', '[Gmail].Sent Mail',
                           re.sub('flagged', '[Gmail].Starred',
                           re.sub('trash', '[Gmail].Trash',
                           re.sub('important', '[Gmail].Important', folder))))))

[Repository canonical-remote]
type = Gmail
remoteuser = gregory.lutostanski@canonical.com
remotepass = RaS0feM2aipaebi
ssl = yes
realdelete = no
nametrans = lambda folder: re.sub('.*Spam$', 'spam', 
                           re.sub('.*Drafts$', 'drafts', 
                           re.sub('.*Sent Mail$', 'sent', 
                           re.sub('.*Starred$', 'flagged', 
                           re.sub('.*Trash$', 'trash', 
                           re.sub('.*Important$', 'important', folder))))))
folderfilter = lambda foldername: foldername not in '[Gmail]/All Mail'
# Necessary as of OfflineIMAP 6.5.4
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
